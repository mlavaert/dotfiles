#!/usr/bin/env sh

# Utility to create a one-time-secret from either STDIN or the first parameter
if [ -p /dev/stdin ]; then
	input="$(cat -)"
else
	input="$1"
fi

if [ -z "${input}" ]; then
	echo "No secret specified"
	return 1
fi

secret=$(curl -s -F "secret=$input" https://onetimesecret.com/api/v1/share | cut -d '"' -f12)

echo "https://onetimesecret.com/secret/$secret"
